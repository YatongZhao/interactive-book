(this["webpackJsonpinteractive-book"]=this["webpackJsonpinteractive-book"]||[]).push([[0],{113:function(e,t,n){"use strict";n.r(t);var c=n(2),i=n(0),a=n.n(i),s=n(11),r=n.n(s),o=n(26),j=n(15),u=n(84),l=n(8),b=n(85),d=n(144),O=n(171),h=n(146),p=n(172),f=n(149),x=n(150),g=n(151),m=n(59),v=n(152),S=n(153),C=n(166),y=n(155),k=n(167),T=n(148),I=n(154),L=n(157),N=n(158),w=n(159),B=n(156),E=n(168),F={apiHost:"",phoneRegExp:/^1[3|4|5|7|8][0-9]{9}$/,passwordRegExp:/(?=.*([a-zA-Z].*))(?=.*[0-9].*)[a-zA-Z0-9-*/+.~!@#$%^&*()]{6,20}$/,nickRegExp:/^\S{4,20}$/},z=Object(i.createContext)({}),H=z.Provider,R=n(83),W=n.n(R),P=n(82),M=n.n(P),J=Object(d.a)((function(e){return Object(O.a)({appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},container:{padding:e.spacing(2)},progress:{position:"fixed",top:0,left:0,width:"100vw",zIndex:1e4}})})),U=a.a.forwardRef((function(e,t){return Object(c.jsx)(h.a,Object(b.a)({direction:"up",ref:t},e))})),A=function(e){var t=e.open,n=e.handleClose,a=e.onSubmit,s=e.titleLabel,r=e.dialogTitle,o=e.contentPlaceHolder,j=J(),u=Object(i.useState)(""),b=Object(l.a)(u,2),d=b[0],O=b[1],k=Object(i.useState)(!1),T=Object(l.a)(k,2),I=T[0],L=T[1],N=Object(i.useState)(""),w=Object(l.a)(N,2),B=w[0],E=w[1],F=Object(i.useState)(""),z=Object(l.a)(F,2),H=z[0],R=z[1],W=Object(i.useState)(!1),P=Object(l.a)(W,2),A=P[0],$=P[1],Z=Object(i.useState)(""),D=Object(l.a)(Z,2),G=D[0],K=D[1],q=Object(i.useState)(!1),Q=Object(l.a)(q,2),V=Q[0],X=Q[1];return Object(i.useEffect)((function(){L(!1),E("")}),[d]),Object(i.useEffect)((function(){$(!1),K("")}),[H]),Object(c.jsxs)(p.a,{fullScreen:!0,open:t,onClose:n,TransitionComponent:U,children:[Object(c.jsx)(f.a,{className:j.appBar,color:"default",children:Object(c.jsxs)(x.a,{children:[Object(c.jsx)(g.a,{edge:"start",color:"inherit",onClick:n,"aria-label":"close",children:Object(c.jsx)(M.a,{})}),Object(c.jsx)(m.a,{variant:"h6",className:j.title,children:r}),Object(c.jsx)(v.a,{autoFocus:!0,color:"inherit",onClick:function(){return d?H?(X(!0),void a({content:H,title:d}).then((function(e){X(!1),n()}))):($(!0),void K("\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a")):(L(!0),void E("".concat(s,"\u4e0d\u80fd\u4e3a\u7a7a")))},children:"\u63d0\u4ea4"})]})}),Object(c.jsxs)(S.a,{container:!0,spacing:4,className:j.container,children:[Object(c.jsx)(S.a,{item:!0,xs:12,children:Object(c.jsx)(C.a,{autoFocus:!0,value:d,error:I,helperText:B,onChange:function(e){return O(e.target.value)},label:s,fullWidth:!0})}),Object(c.jsx)(S.a,{item:!0,xs:12,children:Object(c.jsx)(C.a,{label:"\u5185\u5bb9",value:H,error:A,helperText:G,onChange:function(e){return R(e.target.value)},fullWidth:!0,multiline:!0,placeholder:o})})]}),Object(c.jsx)(h.a,{in:V,direction:"down",children:Object(c.jsx)(y.a,{className:j.progress})})]})},$=Object(d.a)((function(e){return Object(O.a)({title:{flexGrow:1},fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)},loginTips:{textAlign:"center",marginTop:e.spacing(10),marginBottom:e.spacing(10),color:e.palette.grey[400]}})})),Z=function(){var e=$(),t=Object(i.useState)([]),n=Object(l.a)(t,2),a=n[0],s=n[1],r=Object(j.e)(),b=Object(i.useContext)(z),d=Object(i.useState)(!1),O=Object(l.a)(d,2),h=O[0],p=O[1];return Object(i.useEffect)((function(){fetch("".concat(F.apiHost,"/api/book"),{method:"get"}).then((function(e){return e.json()})).then((function(e){s(e.books)}))}),[]),Object(c.jsxs)(k.a,{children:[Object(c.jsx)(f.a,{position:"sticky",color:"primary",children:Object(c.jsxs)(x.a,{variant:"dense",children:[Object(c.jsx)(m.a,{variant:"h6",className:e.title,children:"ZBOOK"}),Object(c.jsx)(E.a,{children:function(){return Object(c.jsx)(c.Fragment,{children:b.isIsLoginReady?Object(c.jsx)(c.Fragment,{children:b.isLogin?Object(c.jsx)(T.a,{in:b.isLogin,children:Object(c.jsx)(k.a,{children:b.userInfo.nick})}):Object(c.jsx)(T.a,{in:!b.isLogin,children:Object(c.jsx)(v.a,{color:"inherit",onClick:function(){return r.push("/login")},children:"Login"})})}):Object(c.jsx)(B.a,{animation:"wave",width:60})})}})]})}),Object(c.jsx)(I.a,{children:a.map((function(e){return Object(c.jsxs)(L.a,{button:!0,onClick:function(){return t=e.id,void r.push("/book/".concat(t));var t},children:[Object(c.jsx)(N.a,{primary:e.title,secondary:e.content}),Object(c.jsx)(k.a,{children:e.author})]},e.id)}))}),Object(c.jsx)(E.a,{children:function(){return Object(c.jsxs)(c.Fragment,{children:[!b.isLogin&&a.length>0&&Object(c.jsx)(k.a,{className:e.loginTips,children:Object(c.jsxs)(m.a,{variant:"caption",children:["\u5feb\u53bb",Object(c.jsx)(o.b,{to:"/login",children:"\u767b\u5f55"}),"\u5f00\u59cb\u81ea\u5df1\u7684\u521b\u4f5c\u5427\uff5e"]})}),b.isLogin&&Object(c.jsx)(w.a,{className:e.fab,color:"primary",onClick:function(){return p(!0)},children:Object(c.jsx)(W.a,{})})]})}}),Object(c.jsx)(A,{open:h,dialogTitle:"\u521b\u5efa\u56fe\u4e66",contentPlaceHolder:"\u672c\u4e66\u524d\u8a00\u90e8\u5206\u5185\u5bb9",titleLabel:"\u4e66\u540d",handleClose:function(){return p(!1)},onSubmit:function(e){var t=e.content,n=e.title;return fetch("".concat(F.apiHost,"/api/book"),{method:"post",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n,content:t})}).then((function(e){return e.json()})).then((function(e){var t;1e3!==e.errCode?(t=e.book,s([].concat(Object(u.a)(a),[t]))):r.push("/login")}))}})]})},D=n(163),G=n(60),K=n(56),q=n(57),Q=n(14),V=n(72);console.log(Object(V.v4)());var X=function(){function e(t){Object(K.a)(this,e),this.title="",this.author="",this.content="",this.sub=[],this.subMap={},this.id="",this.initialized=!1,t&&this.initialize(t),Object(Q.d)(this,{initialized:Q.e,id:Q.e,title:Q.e,author:Q.e,content:Q.e,sub:Q.e,subMap:Q.e,addSub:Q.b,addSubMap:Q.b,initialize:Q.b})}return Object(q.a)(e,[{key:"initialize",value:function(e){this.id=e.id||Object(V.v4)(),this.title=e.title,this.author=e.author,this.content=e.content,this.sub=e.sub||[],this.initialized=!0}},{key:"addSub",value:function(t){this.sub.push({id:t.id,title:t.title,author:t.author}),this.addSubMap(new e(t))}},{key:"addSubMap",value:function(e){this.subMap[e.id]=e}}]),e}(),Y=n(160),_=n(161),ee=n(169),te=Object(d.a)((function(e){return Object(O.a)({container:{marginTop:e.spacing(2)},addChapterBox:{marginLeft:e.spacing(4)}})})),ne=function(e){var t=e.data,n=e.onSelect,i=e.selectId,a=e.onSubmit,s=te();return Object(c.jsxs)(k.a,{className:s.container,children:[Object(c.jsx)(E.a,{children:function(){return Object(c.jsx)(I.a,{subheader:Object(c.jsx)(Y.a,{disableSticky:!0,children:"\u89c9\u5f97\u672c\u7ae0\u770b\u7684\u4e0d\u8fc7\u763e\uff1f\u770b\u770b\u5176\u4ed6\u540c\u6837\u4f18\u79c0\u7684\u7248\u672c\u5427\uff1a"}),children:t.sub.map((function(e){return Object(c.jsxs)(L.a,{button:!0,onClick:function(){return n(e.id)},children:[Object(c.jsx)(_.a,{children:Object(c.jsx)(ee.a,{checked:e.id===i})}),Object(c.jsx)(N.a,{primary:e.title})]},e.id)}))})}}),Object(c.jsx)(k.a,{className:s.addChapterBox,children:Object(c.jsx)(ie,{onSubmit:a})})]})},ce=Object(d.a)((function(e){return Object(O.a)({loginTips:{marginTop:e.spacing(1),marginBottom:e.spacing(1),color:e.palette.grey[400]}})})),ie=function(e){var t=e.onSubmit,n=Object(i.useState)(!1),a=Object(l.a)(n,2),s=a[0],r=a[1],j=Object(i.useContext)(z),u=ce();return Object(c.jsx)(E.a,{children:function(){return Object(c.jsx)(c.Fragment,{children:j.isLogin?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(v.a,{onClick:function(){return r(!0)},children:"\u521b\u4f5c\u7ae0\u8282"}),Object(c.jsx)(A,{titleLabel:"\u6807\u9898",dialogTitle:"\u6dfb\u52a0\u7ae0\u8282",contentPlaceHolder:"\u672c\u7ae0\u5185\u5bb9...",open:s,handleClose:function(){return r(!1)},onSubmit:t})]}):Object(c.jsx)(k.a,{className:u.loginTips,children:Object(c.jsxs)(m.a,{variant:"caption",children:["\u5feb\u53bb",Object(c.jsx)(o.b,{to:"/login",children:"\u767b\u5f55"}),"\u5f00\u59cb\u81ea\u5df1\u5bf9\u672c\u7ae0\u7684\u521b\u4f5c\u5427\uff5e"]})})})}})},ae=Object(d.a)((function(e){return Object(O.a)({title:{marginTop:e.spacing(8),width:"100%",alignItems:"flex-start",flexDirection:"column"},author:{fontWeight:400,color:e.palette.grey[400],fontSize:e.spacing(2),textAlign:"right",width:"100%",marginTop:e.spacing(1)},content:{marginTop:e.spacing(6),textIndent:e.spacing(4),lineHeight:e.spacing(.22)},selectorContainer:{paddingLeft:e.spacing(3),marginTop:e.spacing(2),marginBottom:e.spacing(2)}})})),se=function e(t){var n=t.data,a=t.parent,s=t.setParentId,r=ae(),o=Object(i.useState)(""),u=Object(l.a)(o,2),b=u[0],d=u[1],O=Object(i.useState)(null),h=Object(l.a)(O,2),p=h[0],f=h[1],x=Object(i.useState)(!1),g=Object(l.a)(x,2),v=g[0],S=g[1],C=Object(j.e)(),y=function(e){d(e),S(!1)};function T(e){return function(t){var n=t.content,c=t.title;return fetch("".concat(F.apiHost,"/api/chapter"),{method:"post",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:c,content:n,parentId:e.id})}).then((function(e){return e.json()})).then((function(t){1e3!==t.errCode?e.addSub(t.chapter):C.push("/login")}))}}return Object(i.useEffect)((function(){0!==n.sub.length&&d(n.sub[0].id)}),[n]),Object(i.useEffect)((function(){b&&(n.subMap[b]?f(n.subMap[b]):fetch("".concat(F.apiHost,"/api/chapter/").concat(b),{method:"get"}).then((function(e){return e.json()})).then((function(e){var t=e.chapter,c=new X(t);f(c),n.addSubMap(c)})))}),[b,n]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(k.a,{className:r.content,children:n.content}),a&&Object(c.jsx)(ne,{onSubmit:T(a),data:a,onSelect:function(e){s&&s(e)},selectId:n.id}),p&&Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(G.a,{className:r.title,onClick:function(){return S(!v)},children:[Object(c.jsx)(m.a,{variant:"h4",children:p.title}),Object(c.jsxs)(k.a,{className:r.author,children:["author: ",p.author]})]})}),Object(c.jsx)(E.a,{children:function(){return Object(c.jsx)(c.Fragment,{children:(!b||v)&&Object(c.jsx)(ne,{onSubmit:T(n),data:n,onSelect:y,selectId:b})})}}),Object(c.jsx)(E.a,{children:function(){return Object(c.jsx)(c.Fragment,{children:p&&Object(c.jsx)(e,{data:p,parent:n,setParentId:d},p.id)})}})]})},re=n(162),oe=function(e){var t=e.children,n=Object(re.a)();return Object(c.jsx)(h.a,{appear:!1,direction:"down",in:!n,children:t})},je=n(58),ue=n.n(je),le=Object(d.a)((function(e){return Object(O.a)({title:{flexGrow:1},container:{marginTop:e.spacing(3)},menuButton:{marginRight:e.spacing(2)}})})),be=function(){var e=le(),t=Object(j.f)().id,n=Object(i.useState)(null),a=Object(l.a)(n,2),s=a[0],r=a[1],o=Object(j.e)();return Object(i.useEffect)((function(){fetch("".concat(F.apiHost,"/api/chapter/").concat(t),{method:"get"}).then((function(e){return e.json()})).then((function(e){r(new X(e.chapter))}))}),[t]),Object(c.jsxs)(k.a,{children:[Object(c.jsx)(oe,{children:Object(c.jsx)(f.a,{position:"sticky",color:"default",children:Object(c.jsxs)(x.a,{variant:"dense",children:[Object(c.jsx)(g.a,{onClick:function(){return o.goBack()},edge:"start",className:e.menuButton,color:"inherit",children:Object(c.jsx)(ue.a,{})}),Object(c.jsx)(m.a,{variant:"h6",className:e.title,children:s?Object(c.jsx)(T.a,{in:!!s,children:Object(c.jsx)(k.a,{children:s.title})}):Object(c.jsx)(B.a,{animation:"wave",width:100})})]})})}),Object(c.jsx)(D.a,{className:e.container,children:Object(c.jsx)(E.a,{children:function(){return Object(c.jsx)(c.Fragment,{children:s?s.initialized?Object(c.jsx)(se,{data:s}):Object(c.jsx)(k.a,{children:"error"}):Object(c.jsx)(k.a,{children:"waiting..."})})}})})]})},de=n(164),Oe=function(){var e=Object(j.e)();return Object(c.jsx)(f.a,{position:"sticky",color:"inherit",elevation:0,children:Object(c.jsx)(x.a,{variant:"dense",children:Object(c.jsx)(g.a,{onClick:function(){return e.goBack()},edge:"start",color:"inherit",children:Object(c.jsx)(ue.a,{})})})})},he=Object(d.a)((function(e){return Object(O.a)({container:{margin:"".concat(e.spacing(4),"px auto"),maxWidth:e.spacing(40)},submitBtnContainer:{position:"relative"},submitBtn:{marginTop:e.spacing(1)},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-10,marginLeft:-12},signInBox:{display:"flex",justifyContent:"center"}})})),pe=function(){var e=Object(j.e)(),t=Object(i.useState)(""),n=Object(l.a)(t,2),a=n[0],s=n[1],r=Object(i.useState)(!1),u=Object(l.a)(r,2),b=u[0],d=u[1],O=Object(i.useState)(""),h=Object(l.a)(O,2),p=h[0],f=h[1],x=Object(i.useState)(""),g=Object(l.a)(x,2),y=g[0],T=g[1],I=Object(i.useState)(!1),L=Object(l.a)(I,2),N=L[0],w=L[1],B=Object(i.useState)(""),E=Object(l.a)(B,2),H=E[0],R=E[1],W=Object(i.useState)(!1),P=Object(l.a)(W,2),M=P[0],J=P[1],U=Object(i.useContext)(z),A=he();return Object(i.useEffect)((function(){f(""),d(!1)}),[a]),Object(i.useEffect)((function(){R(""),w(!1)}),[y]),Object(c.jsxs)(k.a,{children:[Object(c.jsx)(Oe,{}),Object(c.jsxs)(S.a,{container:!0,className:A.container,spacing:4,children:[Object(c.jsx)(S.a,{item:!0,xs:12,children:Object(c.jsx)(C.a,{autoFocus:!0,error:b,helperText:p,value:a,onChange:function(e){return s(e.target.value)},label:"\u624b\u673a",type:"number",fullWidth:!0})}),Object(c.jsx)(S.a,{item:!0,xs:12,children:Object(c.jsx)(C.a,{error:N,helperText:H,value:y,type:"password",onChange:function(e){return T(e.target.value)},label:"\u5bc6\u7801",fullWidth:!0})}),Object(c.jsxs)(S.a,{item:!0,xs:12,className:A.submitBtnContainer,children:[Object(c.jsx)(v.a,{disabled:M,onClick:function(){if(!b&&!N){if(!a)return f("\u8bf7\u8f93\u5165\u624b\u673a\u53f7"),void d(!0);if(!F.phoneRegExp.test(a))return f("\u8bf7\u8f93\u5165\u6b63\u786e\u624b\u673a\u53f7"),void d(!0);J(!0),fetch("".concat(F.apiHost,"/api/user/sign-in"),{method:"post",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:a,password:y})}).then((function(e){return e.json()})).then((function(t){if(J(!1),!t.errCode)return e.goBack(),U.setIsLogin(!0),void U.setUserInfo(t.info);1===t.errCode?(f(t.errMsg),d(!0)):2===t.errCode&&(R(t.errMsg),w(!0))}))}},className:A.submitBtn,variant:"outlined",color:"primary",fullWidth:!0,children:"\u767b\u5f55"}),M&&Object(c.jsx)(de.a,{size:24,className:A.buttonProgress})]}),Object(c.jsx)(S.a,{item:!0,xs:12,className:A.signInBox,children:Object(c.jsxs)(m.a,{variant:"caption",children:["\u8fd8\u6ca1\u6709\u8d26\u53f7\uff0c\u7acb\u5373\u524d\u5f80",Object(c.jsx)(o.b,{to:"/sign-up",children:"\u6ce8\u518c"})]})})]})]})},fe=Object(d.a)((function(e){return Object(O.a)({container:{margin:"".concat(e.spacing(4),"px auto"),maxWidth:e.spacing(40)},submitBtnContainer:{position:"relative"},submitBtn:{marginTop:e.spacing(1)},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-10,marginLeft:-12}})})),xe=function(){var e=Object(j.e)(),t=Object(i.useState)(""),n=Object(l.a)(t,2),a=n[0],s=n[1],r=Object(i.useState)(!1),o=Object(l.a)(r,2),u=o[0],b=o[1],d=Object(i.useState)(""),O=Object(l.a)(d,2),h=O[0],p=O[1],f=Object(i.useState)(""),x=Object(l.a)(f,2),g=x[0],m=x[1],y=Object(i.useState)(!1),T=Object(l.a)(y,2),I=T[0],L=T[1],N=Object(i.useState)(""),w=Object(l.a)(N,2),B=w[0],E=w[1],H=Object(i.useState)(""),R=Object(l.a)(H,2),W=R[0],P=R[1],M=Object(i.useState)(!1),J=Object(l.a)(M,2),U=J[0],A=J[1],$=Object(i.useState)(""),Z=Object(l.a)($,2),D=Z[0],G=Z[1],K=Object(i.useState)(""),q=Object(l.a)(K,2),Q=q[0],V=q[1],X=Object(i.useState)(!1),Y=Object(l.a)(X,2),_=Y[0],ee=Y[1],te=Object(i.useState)(""),ne=Object(l.a)(te,2),ce=ne[0],ie=ne[1],ae=Object(i.useState)(!1),se=Object(l.a)(ae,2),re=se[0],oe=se[1],je=Object(i.useContext)(z),ue=fe();return Object(i.useEffect)((function(){p(""),b(!1)}),[a]),Object(i.useEffect)((function(){E(""),L(!1)}),[g]),Object(i.useEffect)((function(){G(""),A(!1)}),[W]),Object(i.useEffect)((function(){ie(""),ee(!1)}),[Q]),Object(c.jsxs)(k.a,{children:[Object(c.jsx)(Oe,{}),Object(c.jsxs)(S.a,{container:!0,className:ue.container,spacing:4,children:[Object(c.jsx)(S.a,{item:!0,xs:12,children:Object(c.jsx)(C.a,{autoFocus:!0,error:u,helperText:h,value:a,onChange:function(e){return s(e.target.value)},label:"\u6635\u79f0",fullWidth:!0})}),Object(c.jsx)(S.a,{item:!0,xs:12,children:Object(c.jsx)(C.a,{error:I,helperText:B,value:g,onChange:function(e){return m(e.target.value)},label:"\u624b\u673a",type:"number",fullWidth:!0})}),Object(c.jsx)(S.a,{item:!0,xs:12,children:Object(c.jsx)(C.a,{error:U,helperText:D,value:W,type:"password",onChange:function(e){return P(e.target.value)},label:"\u5bc6\u7801",fullWidth:!0})}),Object(c.jsx)(S.a,{item:!0,xs:12,children:Object(c.jsx)(C.a,{error:_,helperText:ce,value:Q,type:"password",onChange:function(e){return V(e.target.value)},label:"\u786e\u8ba4\u5bc6\u7801",fullWidth:!0})}),Object(c.jsxs)(S.a,{item:!0,xs:12,className:ue.submitBtnContainer,children:[Object(c.jsx)(v.a,{disabled:re,onClick:function(){return g?F.phoneRegExp.test(g)?a?F.nickRegExp.test(a)?W?F.passwordRegExp.test(W)?Q?W!==Q?(ie("\u4e24\u6b21\u8f93\u5165\u5bc6\u7801\u4e0d\u76f8\u540c"),ee(!0),void A(!0)):(oe(!0),void fetch("".concat(F.apiHost,"/api/user/sign-up"),{method:"post",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:g,password:W,nick:a})}).then((function(e){return e.json()})).then((function(t){if(oe(!1),!t.errCode)return je.setIsLogin(!0),je.setUserInfo(t.info),void e.push("/");4===t.errCode?(E("\u8be5\u624b\u673a\u53f7\u5df2\u88ab\u6ce8\u518c"),L(!0)):5===t.errCode&&(p("\u8be5\u6635\u79f0\u5df2\u5b58\u5728"),b(!0))}))):(ie("\u8bf7\u8f93\u5165\u4e8c\u6b21\u786e\u8ba4\u5bc6\u7801"),void ee(!0)):(G("\u5bc6\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"),void A(!0)):(G("\u8bf7\u8bbe\u7f6e\u5bc6\u7801"),void A(!0)):(p("\u6635\u79f0\u683c\u5f0f\u4e0d\u7b26\u5408\u8981\u6c42"),void b(!0)):(p("\u8bf7\u8f93\u5165\u6635\u79f0"),void b(!0)):(E("\u8bf7\u8f93\u5165\u6b63\u786e\u624b\u673a\u53f7"),void L(!0)):(E("\u8bf7\u8f93\u5165\u624b\u673a\u53f7"),void L(!0))},className:ue.submitBtn,variant:"outlined",color:"primary",fullWidth:!0,children:"\u6ce8\u518c"}),re&&Object(c.jsx)(de.a,{size:24,className:ue.buttonProgress})]})]})]})},ge=function(){var e=Object(i.useContext)(z);return Object(i.useEffect)((function(){fetch("".concat(F.apiHost,"/api/user/info"),{method:"get",credentials:"include"}).then((function(e){return e.json()})).then((function(t){1e3===t.errCode?e.setIsLogin(!1):(e.setIsLogin(!0),e.setUserInfo(t.info))}))}),[e]),Object(c.jsxs)(o.a,{children:[Object(c.jsx)(j.a,{path:"/",exact:!0,children:Object(c.jsx)(Z,{})}),Object(c.jsx)(j.a,{path:"/book/:id",children:Object(c.jsx)(be,{})}),Object(c.jsx)(j.a,{path:"/login",children:Object(c.jsx)(pe,{})}),Object(c.jsx)(j.a,{path:"/sign-up",children:Object(c.jsx)(xe,{})})]})},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,174)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),i(e),a(e),s(e)}))},ve=n(165),Se=new(function(){function e(){Object(K.a)(this,e),this.isLogin=!1,this.isIsLoginReady=!1,this.userInfo={phone:"",nick:"",id:""},Object(Q.d)(this,{isLogin:Q.e,isIsLoginReady:Q.e,setIsLogin:Q.b,setUserInfo:Q.b})}return Object(q.a)(e,[{key:"setIsLogin",value:function(e){this.isLogin=e,this.isIsLoginReady=!0}},{key:"setUserInfo",value:function(e){this.userInfo=e}}]),e}());r.a.render(Object(c.jsxs)(H,{value:Se,children:[Object(c.jsx)(ve.a,{}),Object(c.jsx)(ge,{})]}),document.getElementById("root")),me()}},[[113,1,2]]]);
//# sourceMappingURL=main.c71e9173.chunk.js.map