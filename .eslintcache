[{"/Users/zhaoyatong/mine-project-2/interactive-book/src/App.tsx":"1","/Users/zhaoyatong/mine-project-2/interactive-book/src/store/chapter.ts":"2","/Users/zhaoyatong/mine-project-2/interactive-book/src/reportWebVitals.ts":"3","/Users/zhaoyatong/mine-project-2/interactive-book/src/store/index.ts":"4","/Users/zhaoyatong/mine-project-2/interactive-book/src/index.tsx":"5","/Users/zhaoyatong/mine-project-2/interactive-book/src/components/Chapter.tsx":"6","/Users/zhaoyatong/mine-project-2/interactive-book/src/components/ChapterSelector.tsx":"7","/Users/zhaoyatong/mine-project-2/interactive-book/src/components/Home.tsx":"8","/Users/zhaoyatong/mine-project-2/interactive-book/src/components/Book.tsx":"9","/Users/zhaoyatong/mine-project-2/interactive-book/src/components/HideOnScroll.tsx":"10","/Users/zhaoyatong/mine-project-2/interactive-book/src/components/Login.tsx":"11","/Users/zhaoyatong/mine-project-2/interactive-book/src/store/store.ts":"12","/Users/zhaoyatong/mine-project-2/interactive-book/src/components/SignUP.tsx":"13","/Users/zhaoyatong/mine-project-2/interactive-book/src/config.ts":"14"},{"size":1089,"mtime":1610000072006,"results":"15","hashOfConfig":"16"},{"size":1569,"mtime":1610009528093,"results":"17","hashOfConfig":"16"},{"size":425,"mtime":1609160102022,"results":"18","hashOfConfig":"16"},{"size":188,"mtime":1609988078636,"results":"19","hashOfConfig":"16"},{"size":795,"mtime":1609988107975,"results":"20","hashOfConfig":"16"},{"size":6364,"mtime":1610012763251,"results":"21","hashOfConfig":"16"},{"size":1624,"mtime":1610012166518,"results":"22","hashOfConfig":"16"},{"size":8584,"mtime":1610010424747,"results":"23","hashOfConfig":"16"},{"size":2324,"mtime":1609988169365,"results":"24","hashOfConfig":"16"},{"size":294,"mtime":1609917297805,"results":"25","hashOfConfig":"16"},{"size":5117,"mtime":1610000557422,"results":"26","hashOfConfig":"16"},{"size":677,"mtime":1609989348227,"results":"27","hashOfConfig":"16"},{"size":6568,"mtime":1610002425347,"results":"28","hashOfConfig":"16"},{"size":296,"mtime":1610000792526,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"davapf",{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"39","messages":"40","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"42"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/zhaoyatong/mine-project-2/interactive-book/src/App.tsx",[],"/Users/zhaoyatong/mine-project-2/interactive-book/src/store/chapter.ts",[],"/Users/zhaoyatong/mine-project-2/interactive-book/src/reportWebVitals.ts",[],["62","63"],"/Users/zhaoyatong/mine-project-2/interactive-book/src/store/index.ts",[],"/Users/zhaoyatong/mine-project-2/interactive-book/src/index.tsx",["64"],"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { autorun } from 'mobx';\nimport { StoreProvider } from './store';\nimport { CssBaseline } from '@material-ui/core';\nimport { Store } from './store/store';\n\nconst data = new Store();\n\n// autorun(() => {\n//   localStorage.setItem('interactive-book-store', JSON.stringify(data));\n// });\n\nReactDOM.render(\n  <StoreProvider value={data}>\n    <CssBaseline />\n    <App />\n  </StoreProvider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n",["65","66"],"/Users/zhaoyatong/mine-project-2/interactive-book/src/components/Chapter.tsx",["67","68","69","70","71","72","73","74","75","76","77"],"import { Box, Button, ButtonBase, createStyles, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, FormControl, FormControlLabel, FormLabel, makeStyles, Radio, RadioGroup, TextField, Theme, Typography } from '@material-ui/core';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { Chapter } from '../store/chapter';\nimport { Observer } from 'mobx-react';\nimport { ChapterSelector } from './ChapterSelector';\nimport { config } from '../config';\nimport { AddChapterDialog } from './Home';\nimport { Link, useHistory } from 'react-router-dom';\nimport { StoreContext } from '../store';\n\nconst useAddChapterStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    loginTips: {\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n        color: theme.palette.grey[400],\n    }\n  })\n);\n\nexport const AddChapter = ({ onSubmit }: {\n    onSubmit: (arg: {\n        content: string;\n        title: string;\n    }) => Promise<void>;\n}) => {\n    const [openAddDialog, setOpenAddDialog] = useState(false);\n    const store = useContext(StoreContext);\n    const classes = useAddChapterStyles();\n\n    return <Observer>\n        {() => <>\n            {store.isLogin ? <>\n                <Button onClick={() => setOpenAddDialog(true)}>创作章节</Button>\n                <AddChapterDialog\n                    titleLabel=\"标题\"\n                    dialogTitle=\"添加章节\"\n                    contentPlaceHolder=\"本章内容...\"\n                    open={openAddDialog}\n                    handleClose={() => setOpenAddDialog(false)}\n                    onSubmit={onSubmit} />\n            </> :\n            <Box className={classes.loginTips}>\n                <Typography variant=\"caption\">\n                    快去<Link to=\"/login\">登录</Link>开始自己对本章的创作吧～\n                </Typography>\n            </Box>}\n        </>}\n    </Observer>;\n}\n\nconst useChapterBoxStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        title: {\n            marginTop: theme.spacing(8),\n            width: '100%',\n            alignItems: 'flex-start',\n            flexDirection: 'column',\n        },\n        author: {\n            fontWeight: 400,\n            color: theme.palette.grey[400],\n            fontSize: theme.spacing(2),\n            textAlign: 'right',\n            width: '100%',\n            marginTop: theme.spacing(1),\n        },\n        content: {\n            marginTop: theme.spacing(6),\n            textIndent: theme.spacing(4),\n            lineHeight: theme.spacing(.22),\n        },\n        selectorContainer: {\n            paddingLeft: theme.spacing(3),\n            marginTop: theme.spacing(2),\n            marginBottom: theme.spacing(2),\n        }\n    })\n);\n\nexport const ChapterBox = ({ data, parent, setParentId }: {\n    data: Chapter;\n    parent?: Chapter;\n    setParentId?: Function;\n}) => {\n    const classes = useChapterBoxStyles();\n    const [selectedSubChapterId, setSelectedSubChapterId] = useState('');\n    const [selectedSubChapter, setSelectedSubChapter] = useState<Chapter | null>(null);\n    const [showSelector, setShowSelector] = useState(false);\n    const history = useHistory();\n\n    const handleSelect = (id: string) => {\n        setParentId && setParentId(id);\n    }\n\n    const handleChange = (id: string) => {\n        setSelectedSubChapterId(id);\n        setShowSelector(false);\n    }\n\n    function handleCreateChapterSubmit(parent: Chapter) {\n\n        return function ({ content, title }: {\n            content: string; title: string;\n        }) {\n            return fetch(`${config.apiHost}/api/chapter`, {\n                method: 'post',\n                mode: 'cors',\n                credentials: 'include',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    title, content,\n                    parentId: parent.id,\n                }),\n            })\n            .then(data => data.json())\n            .then(res => {\n                if (res.errCode === 1000) {\n                    history.push('/login');\n                    return;\n                }\n                parent.addSub(res.chapter);\n            });\n        }\n    }\n\n    useEffect(() => {\n        if (data.sub.length === 0) return;\n        setSelectedSubChapterId(data.sub[0].id);\n    }, [data]);\n\n    useEffect(() => {\n        if (!selectedSubChapterId) return;\n        if (data.subMap[selectedSubChapterId]) {\n            setSelectedSubChapter(data.subMap[selectedSubChapterId]);\n        } else {\n            fetch(`${config.apiHost}/api/chapter/${selectedSubChapterId}`, {\n                method: 'get'\n            })\n            .then(data => data.json())\n            .then(({ chapter: chapterSource }) => {\n                // console.log('res', res);\n                let chapter = new Chapter(chapterSource);\n                setSelectedSubChapter(chapter);\n                data.addSubMap(chapter);\n            });\n        }\n    }, [selectedSubChapterId, data]);\n\n    return <>\n        <Box className={classes.content}>{data.content}</Box>\n        {parent && <ChapterSelector\n            onSubmit={handleCreateChapterSubmit(parent)}\n            data={parent} onSelect={handleSelect} selectId={data.id} />}\n        {selectedSubChapter && <>\n            <ButtonBase className={classes.title} onClick={() => setShowSelector(!showSelector)}>\n                <Typography variant=\"h4\">\n                    {selectedSubChapter.title}\n                </Typography>\n                <Box className={classes.author}>author: {selectedSubChapter.author}</Box>\n            </ButtonBase>\n        </>}\n        \n        <Observer>\n            {() => <>\n                {(!selectedSubChapterId || showSelector) && <ChapterSelector\n                    onSubmit={handleCreateChapterSubmit(data)}\n                    data={data} onSelect={handleChange} selectId={selectedSubChapterId} />}\n            </>}\n        </Observer>\n        <Observer>\n            {() => <>\n                {selectedSubChapter &&\n                    <ChapterBox\n                        key={selectedSubChapter.id}\n                        data={selectedSubChapter}\n                        parent={data}\n                        setParentId={setSelectedSubChapterId} />\n                }\n            </>}\n        </Observer>\n    </>;\n}","/Users/zhaoyatong/mine-project-2/interactive-book/src/components/ChapterSelector.tsx",[],"/Users/zhaoyatong/mine-project-2/interactive-book/src/components/Home.tsx",["78"],"/Users/zhaoyatong/mine-project-2/interactive-book/src/components/Book.tsx",[],"/Users/zhaoyatong/mine-project-2/interactive-book/src/components/HideOnScroll.tsx",[],"/Users/zhaoyatong/mine-project-2/interactive-book/src/components/Login.tsx",[],"/Users/zhaoyatong/mine-project-2/interactive-book/src/store/store.ts",[],"/Users/zhaoyatong/mine-project-2/interactive-book/src/components/SignUP.tsx",[],"/Users/zhaoyatong/mine-project-2/interactive-book/src/config.ts",[],{"ruleId":"79","replacedBy":"80"},{"ruleId":"81","replacedBy":"82"},{"ruleId":"83","severity":1,"message":"84","line":5,"column":10,"nodeType":"85","messageId":"86","endLine":5,"endColumn":17},{"ruleId":"79","replacedBy":"87"},{"ruleId":"81","replacedBy":"88"},{"ruleId":"83","severity":1,"message":"89","line":1,"column":49,"nodeType":"85","messageId":"86","endLine":1,"endColumn":55},{"ruleId":"83","severity":1,"message":"90","line":1,"column":57,"nodeType":"85","messageId":"86","endLine":1,"endColumn":70},{"ruleId":"83","severity":1,"message":"91","line":1,"column":72,"nodeType":"85","messageId":"86","endLine":1,"endColumn":85},{"ruleId":"83","severity":1,"message":"92","line":1,"column":87,"nodeType":"85","messageId":"86","endLine":1,"endColumn":104},{"ruleId":"83","severity":1,"message":"93","line":1,"column":106,"nodeType":"85","messageId":"86","endLine":1,"endColumn":117},{"ruleId":"83","severity":1,"message":"94","line":1,"column":119,"nodeType":"85","messageId":"86","endLine":1,"endColumn":130},{"ruleId":"83","severity":1,"message":"95","line":1,"column":132,"nodeType":"85","messageId":"86","endLine":1,"endColumn":148},{"ruleId":"83","severity":1,"message":"96","line":1,"column":150,"nodeType":"85","messageId":"86","endLine":1,"endColumn":159},{"ruleId":"83","severity":1,"message":"97","line":1,"column":173,"nodeType":"85","messageId":"86","endLine":1,"endColumn":178},{"ruleId":"83","severity":1,"message":"98","line":1,"column":180,"nodeType":"85","messageId":"86","endLine":1,"endColumn":190},{"ruleId":"83","severity":1,"message":"99","line":1,"column":192,"nodeType":"85","messageId":"86","endLine":1,"endColumn":201},{"ruleId":"83","severity":1,"message":"100","line":1,"column":82,"nodeType":"85","messageId":"86","endLine":1,"endColumn":91},"no-native-reassign",["101"],"no-negated-in-lhs",["102"],"@typescript-eslint/no-unused-vars","'autorun' is defined but never used.","Identifier","unusedVar",["101"],["102"],"'Dialog' is defined but never used.","'DialogActions' is defined but never used.","'DialogContent' is defined but never used.","'DialogContentText' is defined but never used.","'DialogTitle' is defined but never used.","'FormControl' is defined but never used.","'FormControlLabel' is defined but never used.","'FormLabel' is defined but never used.","'Radio' is defined but never used.","'RadioGroup' is defined but never used.","'TextField' is defined but never used.","'InputBase' is defined but never used.","no-global-assign","no-unsafe-negation"]